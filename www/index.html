<html lang="en">
  <!DOCTYPE html>

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Netlify Compose Code Challenge</title>
    <link
      rel="preload"
      href="https://example-styles.netlify.app/fonts/PacaembuVar-latin.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />
    <link
      rel="preload"
      href="https://example-styles.netlify.app/fonts/MulishVar-latin.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />
    <link
      rel="stylesheet"
      href="https://example-styles.netlify.app/styles.css"
    />
    <link rel="stylesheet" href="/styles.css" />

    <!--
    TODO: Add your name to enter the prize draw
  -->
    <!-- <meta name="author" content="YOUR NAME"> -->

    <!--
    TODO: Add your email and we'll show an avatar in the leaderboard.
    (And you'll get more points!
    -->
    <!-- <meta name="email" content="YOUR EMAIL ADDRESS"> -->
  </head>

  <body>
    <partial name="header"></partial>

    <main>
      <section>
        <blockquote>
          <img src="/images/check.svg" class="check" alt="Checkmark" />
          <p>
            You cloned the repo, created a new site, and deployed. That was step
            1. You're on your way.
          </p>
        </blockquote>
        <p>
          From here you'll making some changes to the site's code. To begin
          with, just the <code>index.html</code> file. You might choose to clone
          your new repo locally to work on it, or
          <span data-nf-enhance="repo-link">
            edit it directly in the repo on GitHub
          </span>
          .
        </p>
        <p>
          Make sure to add your name to the <code>meta</code> tag in the
          <code>head</code> of the
          <span data-nf-enhance="repo-link"><code>index.html</code></span>
          file so that we know who to enter into the prize draw. Done that?
          Good. Let's move on to Step 2.
        </p>
      </section>

      <section class="step">
        <div class="step-content">
          <div class="step-num"><span>Step 2</span></div>
          <h2>Adding an extension</h2>
          <p class="step-intro">
            Enable and use a Netlify Extension to enter the competition (and to
            reveal the next steps which will earn you more points for a better
            chance of winning)
          </p>
          <h3>Here's how:</h3>
          <ol>
            <li>
              Install the
              <a
                href="https://app.netlify.com/extensions/compose-challenge-edge-includes"
                ><code>netlify-edge-includes-at-compose</code></a
              >
              extension for your Netlify team.
            </li>
            <li>
              Once installed, you can use it on any of your sites. Enable it for
              this site from the Netlify UI under "Site configuration / General"
            </li>
            <li>
              The extension will let you inject content into your site via a
              component. Add the code shown below to your
              <span data-nf-enhance="repo-link"><code>index.html</code></span>
              file in this site and push your changes to trigger another site
              deployment to to see the result.
              <pre><code>&lt;netlify-edge-include href=&quot;https://compose-challenge.netlify.app/partials/add-image-cdn&quot;&gt;&lt;/netlify-edge-include&gt;
&lt;netlify-edge-include href=&quot;https://compose-challenge.netlify.app/partials/add-image-cdn&quot;&gt;&lt;/netlify-edge-include&gt;</code></pre>
            </li>
            <li>
              Follow the instructions included into the next deployment of your
              site
            </li>
          </ol>
        </div>
      </section>

      <!-- looks like a good place for an edge include -->

      <section>
        <!-- maybe an image or two will go here...? -->
      </section>

      <!-- looks like a good place for another edge include! -->

      <section class="step">
        <blockquote>
          <img src="/images/check.svg" class="check" alt="Checkmark" />
          <p>
            Looking good! You enabled an integration which provides
            <em>edge includes</em>, a convenient way to import and insert HTML
            into your pages on request with and Edge Function. Let's keep going!
          </p>
        </blockquote>
        <div class="step-content">
          <div class="step-num"><span>Step 3</span></div>
          <h2>Serve images with the Netlify Image CDN</h2>
          <p class="step-intro">
            Now lets add image to this page and serve it via the Netlify Image
            CDN. Doing that gives you access to image optimisations,
            transformations, and high performance serving of image assets.
            Handy!
          </p>
          <ol>
            <li>
              Add an image element to the page by editing the
              <code>index.html</code> file. There's an image asset already in
              this repo so you could just add this:
              <pre><code>&lt;img src="/images/bay-bridge.jpg" alt="A photo of the Bay Bridge in San Francisco" /&gt;
    </code></pre>
            </li>
            <li>
              Update your new image element's <code>src</code> attribute to so
              that Netlify serves it via the Image CDN rather directoy from your
              site's assets
              <pre><code>src="/.netlify/images/?url=/images/bay-bridge.jpg"
    </code></pre>
            </li>
            <li>
              Add a resized copy of the image by duplicating the image element
              in the HTML and adding a width attribute like this:
              <pre><code>src="/.netlify/images/?url=/images/bay-bridge.jpg&amp;width=200"
    </code></pre>
            </li>
            <li>
              Done? Let's move on to the next part of the challenge! Get the
              next instructions by adding another edge include as shown below to
              reveal the instructions in your site after you deploy.
              <pre><code class="language-html">&lt;netlify-edge-include href="https://compose-challenge.netlify.app/partials/add-blob-storage"&gt;&lt;/netlify-edge-include&gt;
    </code></pre>
            </li>
          </ol>
        </div>
      </section>

      <section>
        <!-- maybe an image or two will go here...? -->
        <img
          src="/.netlify/images/?url=/images/bay-bridge.jpg"
          alt="A photo of the Bay Bridge in San Francisco"
        />
        <img
          src="/.netlify/images/?url=/images/bay-bridge.jpg&amp;width=200"
          alt="A photo of the Bay Bridge in San Francisco"
        />
      </section>

      <!--looks like a good place for another edge inlcude! -->
      <hr />
      <section class="step">
        <blockquote>
          <img src="/images/check.svg" class="check" alt="Checkmark" />
          <p>
            Got a couple of pictures there? Different sizes? Great! You're using
            Netlify to resize, optimize, and serve those for you. Let's earn you
            some more points to improve your chances of winning the prize draw
            with step 4...
          </p>
        </blockquote>
        <div class="step-content">
          <div class="step-num"><span>Step 4</span></div>
          <h2>Read and write data with Netlify Blobs</h2>
          <p class="step-intro">
            Time to use another powerful Netlify primitive: Netlify Blobs. Among
            othert things, Netlify Blobs can be used as a KV store. We'll use
            that to add an interactive counter to your site.
          </p>
          <ol>
            <li>
              Add some UI as HTML to this page to give you a button and a
              counter
            </li>
            <li>
              Add the JavaScript below to your page to handle button clicks and
              dispatch calls to a serverless API
            </li>
            <li>
              Edit the serverless API
              (<code>/netlify/edge-functions/count.ts</code>) to enable it to
              use the Netlify Blob Store (the code is all in there waiting for
              you to uncomment it)
            </li>
            <li>Deploy your site change to qualify for the prize draw.</li>
          </ol>
          <h3>Button and counter UI</h3>
          <pre><code class="language-html">&lt;section&gt;
  &lt;div class="panel"&gt;
    &lt;button id="ccc-vote"&gt;Pick me, pick me!&lt;/button&gt;
    &lt;b id="ccc-vote-count"&gt;&lt;/b&gt;
  &lt;/div&gt;
  &lt;!-- Add some JavaScript to handle the clicks and post to the blob store API function --&gt;
&lt;/section&gt;</code></pre>
          <h3>Button click handler and local API call</h3>
          <pre><code class="language-html">&lt;script&gt;
      const button = document.getElementById("ccc-vote");
      const count = document.getElementById("ccc-vote-count");
      button.addEventListener("click", async (event) =&gt; {
        const response = await fetch("/api/count", {
          method: "POST",
        });
        count.textContent = await response.text();
      });
    &lt;/script&gt;
    </code></pre>
        </div>
      </section>

      <section>
        <div class="panel">
          <button id="ccc-vote">Pick me, pick me!</button>
          <b id="ccc-vote-count">23</b>
        </div>
        <script>
          const button = document.getElementById("ccc-vote");
          const count = document.getElementById("ccc-vote-count");
          button.addEventListener("click", async (event) => {
            const response = await fetch("/api/count", {
              method: "POST",
            });
            count.textContent = await response.text();
          });
        </script>
      </section>
    </main>

    <!--
    TODO:
    Extra credit: Why not add a global branded footer to the site?
  -->
    <!-- <netlify-edge-include href="https://compose-challenge.netlify.app/partials/footer">

    </netlify-edge-include>  -->
  </body>
</html>
